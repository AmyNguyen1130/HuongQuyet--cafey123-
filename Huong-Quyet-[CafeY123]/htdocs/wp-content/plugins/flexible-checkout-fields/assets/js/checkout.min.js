jQuery(document).on("click",".inspire-file-add-button",function(){jQuery(this).parent().find("input[type=file]").click()});jQuery(document).on("click",".inspire-file-delete-button",function(){jQuery(this).parent().find("input[type=file]").val("");jQuery(this).parent().find("input[type=text]").val("");jQuery(this).parent().find(".inspire-file-info").empty();jQuery(this).parent().find(".inspire-file-info").hide();jQuery(this).parent().find(".inspire-file-delete-button").hide();jQuery(this).parent().find(".inspire-file-add-button").show()});jQuery(document).on("change",".inspire-file-file",function(){var b=jQuery(this).parent().attr("id");jQuery(this).parent().find(".inspire-file-info").empty();jQuery(this).parent().find(".inspire-file-error").empty();jQuery(this).parent().find(".inspire-file-error").hide();jQuery("#"+b).find(".inspire-file-info").show();jQuery("#"+b).find(".inspire-file-info").append(words.uploading);jQuery(this).parent().find("input[type=text]").val(jQuery(this).val());jQuery(this).parent().find(".inspire-file-add-button").hide();var a=new FormData();a.append(jQuery(this).attr("field_name"),jQuery(this).prop("files")[0]);a.append("action","cf_upload");a.append("inspire_upload_nonce",inspire_upload_nonce);jQuery("#place_order").prop("disabled",true);jQuery.ajax({type:"POST",url:ajaxurl,data:a,contentType:false,processData:false,success:function(d){jQuery("#place_order").prop("disabled",false);if(d!=0){d=JSON.parse(d);if(d.status!="ok"){jQuery("#"+b).find(".inspire-file-add-button").show();jQuery("#"+b).find(".inspire-file-info").empty();jQuery("#"+b).find(".inspire-file-info").hide();jQuery("#"+b).find(".inspire-file-error").empty();jQuery("#"+b).find(".inspire-file-error").show();jQuery("#"+b).find(".inspire-file-error").append(d.message+"<br/>");jQuery("#"+b).find(".inspire-file-file").val("");jQuery("#"+b).find(".inspire-file").val("")}else{jQuery("#"+b).find(".inspire-file-delete-button").show();jQuery("#"+b).find(".inspire-file-error").empty();jQuery("#"+b).find(".inspire-file-error").hide();jQuery("#"+b).find(".inspire-file-info").empty();jQuery("#"+b).find(".inspire-file-info").show();var c=jQuery("#"+b).find("input[type=file]").val().replace(/.*(\/|\\)/,"");jQuery("#"+b).find(".inspire-file-info").append(c+"<br/>")}if(jQuery("#"+b).find(".inspire-file").val()==""){jQuery(this).parent().find(".inspire-file-info").empty();jQuery(this).parent().find(".inspire-file-error").empty();jQuery(this).parent().find(".inspire-file-error").hide()}}else{}}})});